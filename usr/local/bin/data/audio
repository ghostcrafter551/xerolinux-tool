#!/bin/bash
#set -e
##################################################################################################################
# Written to be used on 64 bits computers
# Author 	: 	DarkXero
# Website 	: 	http://xerolinux.xyz
##################################################################################################################
tput setaf 1
echo "###############################################################################"
echo "#                       XeroLinux Audio Driver Switcher                       #"
echo "#                                                                             #"
echo "#                This Will Allow You To Switch Audio Driver                   #"
echo "###############################################################################"
tput sgr0
echo
echo "Select an Option..."
echo
echo "0.  Do nothing"
echo "1.  Replace Pulse With PipeWire"
echo "2.  Replace PipeWire With Pulse"
echo
echo "Type the number..."
echo

read CHOICE

case $CHOICE in

    0 )
      echo
      echo "########################################"
      echo "   We did nothing as per your request   "
      echo "########################################"
      echo
      ;;

    1 )
      echo
      echo "##########################################"
      echo "      Replacing Pulse with PipeWire       "
      echo "##########################################"
			sudo pacman -Rdd --noconfirm alsa-firmware pavucontrol-qt paprefs python-pulsectl pulseaudio-{bluetooth,alsa,equalizer-ladspa,jack,qt,zeroconf}

            sudo pacman -S --needed gst-plugin-pipewire pipewire-{alsa,jack,media-session,pulse,zeroconf}

            systemctl --user enable --now pipewire pipewire-pulse pipewire-media-session
      echo "#######################################"
      echo "          All Done, Rebooting          "
      echo "#######################################"
            sleep 3
			reboot
      ;;

    2 )
      echo
      echo "##########################################"
      echo "      Replacing PipeWire with Pulse       "
      echo "##########################################"
			systemctl --user disable --now pipewire pipewire-pulse pipewire-media-session

			sudo pacman -Rdd --noconfirm gst-plugin-pipewire pipewire-{alsa,jack,media-session,pulse,zeroconf}

            sudo pacman -S alsa-firmware pavucontrol-qt paprefs python-pulsectl pulseaudio-{bluetooth,alsa,equalizer-ladspa,jack,qt,zeroconf}
      echo "#######################################"
      echo "          All Done, Rebooting          "
      echo "#######################################"
            sleep 3
			reboot
      ;;

    * )
      echo "#################################"
      echo "Choose the correct number"
      echo "#################################"
      ;;
esac
